# 医疗预约系统 - SYSML 图表

## 1. 系统上下文图 (System Context Diagram)

### 字符图表示
```
┌─────────────────────────────────────────────────────────────────┐
│                    医疗预约系统                                │
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐  │
│  │   患者          │    │   医生          │    │   管理员    │  │
│  │   (Patient)     │    │   (Doctor)      │    │   (Admin)   │  │
│  │                 │    │                 │    │             │  │
│  │ • 注册          │    │ • 管理排班      │    │ • 管理用户  │  │
│  │ • 登录          │    │ • 查看预约      │    │ • 查看统计  │  │
│  │ • 预约挂号      │    │ • 创建病历      │    │ • 配置系统  │  │
│  │ • 查看病历      │    │ • 回复消息      │    │ • 监控系统  │  │
│  │ • 发送消息      │    │ • 查看通知      │    │             │  │
│  │ • 查看通知      │    │ • 更新资料      │    │             │  │
│  │ • 下载记录      │    │                 │    │             │  │
│  └─────────────────┘    └─────────────────┘    └─────────────┘  │
│           │                       │                       │      │
│           └───────────────────────┼───────────────────────┘      │
│                                   │                              │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    核心系统                                │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   认证      │  │   预约      │  │   病历      │        │ │
│  │  │   模块      │  │   模块      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 登录      │  │ • 创建      │  │ • 创建      │        │ │
│  │  │ • 注册      │  │ • 更新      │  │ • 查看      │        │ │
│  │  │ • 资料      │  │ • 取消      │  │ • 更新      │        │ │
│  │  │ • 密码      │  │ • 排班      │  │ • 下载      │        │ │
│  │  │             │  │ • 通知      │  │ • 上传      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   消息      │  │   通知      │  │   管理      │        │ │
│  │  │   模块      │  │   模块      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 发送      │  │ • 创建      │  │ • 用户      │        │ │
│  │  │ • 接收      │  │ • 阅读      │  │   管理      │        │ │
│  │  │ • 历史      │  │ • 删除      │  │ • 统计      │        │ │
│  │  │ • 附件      │  │ • 国际化    │  │ • 设置      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### Draw.io 绘制说明
1. **外部角色框**：使用圆角矩形，不同颜色区分
   - 患者：浅蓝色 (#E3F2FD)
   - 医生：浅绿色 (#E8F5E8)
   - 管理员：浅橙色 (#FFF3E0)

2. **核心系统框**：使用矩形，深色边框
3. **模块框**：使用圆角矩形，浅灰色背景
4. **连接线**：使用实线箭头，表示交互关系

---

## 2. 用例图 (Use Case Diagram)

### 字符图表示
```
┌─────────────────────────────────────────────────────────────────┐
│                    医疗预约系统                                │
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐  │
│  │   患者          │    │   医生          │    │   管理员    │  │
│  │                 │    │                 │    │             │  │
│  │ ○ 注册          │    │ ○ 管理排班      │    │ ○ 管理用户  │  │
│  │ ○ 登录          │    │ ○ 查看预约      │    │ ○ 查看统计  │  │
│  │ ○ 查看资料      │    │ ○ 创建病历      │    │ ○ 配置系统  │  │
│  │ ○ 预约挂号      │    │ ○ 发送消息      │    │ ○ 监控系统  │  │
│  │ ○ 取消预约      │    │ ○ 回复消息      │    │             │  │
│  │ ○ 查看病历      │    │ ○ 查看通知      │    │             │  │
│  │ ○ 发送消息      │    │ ○ 更新资料      │    │             │  │
│  │ ○ 查看通知      │    │                 │    │             │  │
│  │ ○ 下载记录      │    │                 │    │             │  │
│  └─────────────────┘    └─────────────────┘    └─────────────┘  │
│           │                       │                       │      │
│           └───────────────────────┼───────────────────────┘      │
│                                   │                              │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    系统边界                                │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   认证      │  │   预约      │  │   病历      │        │ │
│  │  │   系统      │  │   系统      │  │   系统      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   消息      │  │   通知      │  │   管理      │        │ │
│  │  │   系统      │  │   系统      │  │   系统      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### Draw.io 绘制说明
1. **角色**：使用小人图标 (Actor)
2. **用例**：使用椭圆，白色背景
3. **系统边界**：使用矩形，虚线边框
4. **关联关系**：使用实线连接角色和用例
5. **包含关系**：使用虚线箭头，标注 <<include>>
6. **扩展关系**：使用虚线箭头，标注 <<extend>>

---

## 3. 类图 (Class Diagram)

### 字符图表示
```
┌─────────────────────────────────────────────────────────────────┐
│                           用户                                  │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - name: String                                                  │
│ - email: String                                                 │
│ - password: String                                              │
│ - role: String (patient|doctor|admin)                          │
│ - phone: String                                                 │
│ - address: String                                               │
│ - dateOfBirth: Date                                             │
│ - gender: String                                                │
│ - specialization: String                                        │
│ - department: String                                            │
│ - licenseNumber: String                                         │
│ - experience: Number                                            │
│ - education: String                                             │
│ - bio: String                                                   │
│ - emergencyContact: Object                                      │
│ - medicalHistory: [String]                                      │
│ - allergies: [String]                                           │
│ - avatar: String                                                │
│ - isActive: Boolean                                             │
│ - lastLogin: Date                                               │
│ - createdAt: Date                                               │
│ - updatedAt: Date                                               │
├─────────────────────────────────────────────────────────────────┤
│ + matchPassword(enteredPassword): Boolean                      │
│ + generateAuthToken(): String                                  │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                        预约                                    │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - patient: ObjectId (ref: User)                                │
│ - doctor: ObjectId (ref: User)                                 │
│ - date: Date                                                    │
│ - timeSlot: String                                              │
│ - status: String (pending|confirmed|cancelled|completed|no-show)│
│ - type: String (consultation|follow-up|emergency|routine)      │
│ - symptoms: String                                              │
│ - notes: String                                                 │
│ - cancellationReason: String                                   │
│ - cancelledBy: ObjectId (ref: User)                            │
│ - cancelledAt: Date                                             │
│ - reminderSent: Boolean                                         │
│ - createdAt: Date                                               │
│ - updatedAt: Date                                               │
├─────────────────────────────────────────────────────────────────┤
│ + updateStatus(newStatus): void                                │
│ + cancel(reason, cancelledBy): void                            │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                        病历                                    │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - patient: ObjectId (ref: User)                                │
│ - doctor: ObjectId (ref: User)                                 │
│ - appointment: ObjectId (ref: Appointment)                     │
│ - visitDate: Date                                               │
│ - symptoms: String                                              │
│ - diagnosis: String                                             │
│ - treatment: String                                             │
│ - prescription: Object                                          │
│ - vitalSigns: Object                                            │
│ - labResults: [Object]                                          │
│ - attachments: [Object]                                         │
│ - notes: String                                                 │
│ - followUpDate: Date                                            │
│ - followUpNotes: String                                         │
│ - isActive: Boolean                                             │
│ - createdAt: Date                                               │
│ - updatedAt: Date                                               │
├─────────────────────────────────────────────────────────────────┤
│ + addAttachment(file): void                                    │
│ + updateVitalSigns(signs): void                                │
│ + addLabResult(result): void                                   │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                        消息                                    │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - sender: ObjectId (ref: User)                                 │
│ - recipient: ObjectId (ref: User)                              │
│ - content: String                                               │
│ - messageType: String (text|image|file|system)                 │
│ - attachments: [Object]                                         │
│ - isRead: Boolean                                               │
│ - readAt: Date                                                  │
│ - isSystemMessage: Boolean                                      │
│ - relatedAppointment: ObjectId (ref: Appointment)              │
│ - relatedMedicalRecord: ObjectId (ref: MedicalRecord)          │
│ - createdAt: Date                                               │
│ - updatedAt: Date                                               │
├─────────────────────────────────────────────────────────────────┤
│ + markAsRead(): void                                           │
│ + addAttachment(file): void                                    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                      医生排班                                  │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - doctor: ObjectId (ref: User)                                 │
│ - date: Date                                                    │
│ - timeSlots: [Object]                                           │
│ - isWorkingDay: Boolean                                         │
│ - notes: String                                                 │
│ - maxAppointments: Number                                       │
│ - createdAt: Date                                               │
│ - updatedAt: Date                                               │
├─────────────────────────────────────────────────────────────────┤
│ + addTimeSlot(time, isAvailable): void                         │
│ + updateTimeSlot(time, isAvailable): void                      │
│ + getAvailableSlots(): [String]                                │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                        通知                                    │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - recipientId: ObjectId (ref: User)                            │
│ - senderId: ObjectId (ref: User)                               │
│ - type: String                                                  │
│ - title: String                                                 │
│ - content: String                                               │
│ - relatedId: ObjectId                                           │
│ - relatedType: String                                           │
│ - isRead: Boolean                                               │
│ - isActive: Boolean                                             │
│ - createdAt: Date                                               │
│ - updatedAt: Date                                               │
├─────────────────────────────────────────────────────────────────┤
│ + markAsRead(): void                                           │
│ + createAppointmentRequest(): Notice                           │
│ + createAppointmentConfirmed(): Notice                         │
│ + createMedicalRecordAdded(): Notice                           │
│ + createNewMessage(): Notice                                   │
└─────────────────────────────────────────────────────────────────┘
```

### Draw.io 绘制说明
1. **类框**：使用矩形，分为三部分
   - 类名：粗体，居中
   - 属性：左对齐，- 表示私有，+ 表示公有
   - 方法：左对齐，+ 表示公有

2. **关系线**：
   - 关联关系：实线箭头
   - 继承关系：空心三角形箭头
   - 聚合关系：空心菱形箭头
   - 组合关系：实心菱形箭头

3. **多重性**：
   - 1：一对一
   - *：多对多
   - 1..*：一对多

---

## 4. 时序图 - 预约流程 (Sequence Diagram - Appointment Booking)

### 字符图表示
```
患者              前端              后端              数据库
  │                   │               │               │
  │ 1. 登录           │               │               │
  │───────────────────│───────────────│               │
  │                   │ 2. 认证       │               │
  │                   │ 请求          │               │
  │                   │───────────────│               │
  │                   │               │ 3. 验证       │
  │                   │               │ 用户          │
  │                   │               │───────────────│
  │                   │               │               │ 4. 查询用户
  │                   │               │               │◄────────────
  │                   │               │ 5. 返回       │
  │                   │               │ 令牌          │
  │                   │ 6. 认证       │◄──────────────│
  │                   │ 成功          │               │
  │ 7. 查看医生       │◄──────────────│               │
  │───────────────────│               │               │
  │                   │ 8. 获取       │               │
  │                   │ 医生列表      │               │
  │                   │───────────────│               │
  │                   │               │ 9. 查询       │
  │                   │               │ 医生          │
  │                   │               │───────────────│
  │                   │               │               │ 10. 返回
  │                   │               │               │ 医生列表
  │                   │               │ 11. 返回      │◄────────────
  │                   │               │ 医生列表      │
  │                   │ 12. 显示      │◄──────────────│
  │                   │ 医生列表      │               │
  │ 13. 选择          │◄──────────────│               │
  │ 医生              │               │               │
  │───────────────────│               │               │
  │                   │ 14. 获取      │               │
  │                   │ 排班          │               │
  │                   │───────────────│               │
  │                   │               │ 15. 查询      │
  │                   │               │ 排班          │
  │                   │               │───────────────│
  │                   │               │               │ 16. 返回
  │                   │               │               │ 排班
  │                   │               │ 17. 返回      │◄────────────
  │                   │               │ 排班          │
  │                   │ 18. 显示      │◄──────────────│
  │                   │ 排班          │               │
  │ 19. 预约          │◄──────────────│               │
  │ 挂号              │               │               │
  │───────────────────│               │               │
  │                   │ 20. 创建      │               │
  │                   │ 预约          │               │
  │                   │───────────────│               │
  │                   │               │ 21. 验证      │
  │                   │               │ 并创建        │
  │                   │               │───────────────│
  │                   │               │               │ 22. 保存
  │                   │               │               │ 预约
  │                   │               │               │◄────────────
  │                   │               │ 23. 创建      │
  │                   │               │ 通知          │
  │                   │               │───────────────│
  │                   │               │               │ 24. 保存
  │                   │               │               │ 通知
  │                   │               │               │◄────────────
  │                   │               │ 25. 返回      │
  │                   │               │ 成功          │
  │                   │ 26. 显示      │◄──────────────│
  │                   │ 成功          │               │
  │ 27. 确认          │◄──────────────│               │
  │───────────────────│               │               │
```

### Draw.io 绘制说明
1. **生命线**：使用垂直线，顶部放置参与者名称
2. **激活框**：在生命线上使用细长矩形表示激活状态
3. **消息箭头**：
   - 同步消息：实线箭头
   - 异步消息：虚线箭头
   - 返回消息：虚线箭头
4. **注释框**：使用矩形，虚线边框，用于说明

---

## 5. 活动图 - 用户注册 (Activity Diagram - User Registration)

### 字符图表示
```
┌─────────────────────────────────────────────────────────────────┐
│                        开始                                    │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  填写注册表单                                  │
│                                                                 │
│  • 姓名                                                         │
│  • 邮箱                                                         │
│  • 密码                                                         │
│  • 角色 (患者/医生)                                             │
│  • 电话                                                         │
│  • 地址                                                         │
│  • 出生日期                                                     │
│  • 性别                                                         │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  验证表单数据                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  邮箱已存在？                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │ 是
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  显示错误信息                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  返回表单                                      │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  加密密码                                      │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  创建用户记录                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  生成认证令牌                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  发送欢迎邮件                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                  跳转到仪表板                                  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                        结束                                    │
└─────────────────────────────────────────────────────────────────┘
```

### Draw.io 绘制说明
1. **开始/结束节点**：使用圆形/实心圆
2. **活动节点**：使用圆角矩形
3. **决策节点**：使用菱形
4. **连接线**：使用实线箭头
5. **分支/合并**：使用粗线
6. **注释**：使用矩形，虚线边框

---

## 6. 组件图 (Component Diagram)

### 字符图表示
```
┌─────────────────────────────────────────────────────────────────┐
│                    医疗预约系统                                │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    前端 (React)                            │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   认证      │  │   患者      │  │   医生      │        │ │
│  │  │   模块      │  │   模块      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 登录      │  │ • 仪表板    │  │ • 仪表板    │        │ │
│  │  │ • 注册      │  │ • 预约      │  │ • 排班      │        │ │
│  │  │ • 资料      │  │ • 病历      │  │ • 患者      │        │ │
│  │  │ • 密码      │  │ • 消息      │  │ • 病历      │        │ │
│  │  │             │  │ • 通知      │  │ • 消息      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   管理      │  │   共享      │  │   工具      │        │ │
│  │  │   模块      │  │   组件      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 仪表板    │  │ • 导航栏    │  │ • 国际化    │        │ │
│  │  │ • 用户      │  │ • 通知铃    │  │ • 请求      │        │ │
│  │  │ • 预约      │  │ • 表单      │  │ • 调试      │        │ │
│  │  │ • 病历      │  │ • 表格      │  │ • 日期      │        │ │
│  │  │ • 设置      │  │ • 模态框    │  │             │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                              │                                  │
│                              │ HTTP/HTTPS                       │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    后端 (Node.js)                          │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   认证      │  │   预约      │  │   病历      │        │ │
│  │  │   控制器    │  │   控制器    │  │   控制器    │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 登录      │  │ • 创建      │  │ • 创建      │        │ │
│  │  │ • 注册      │  │ • 更新      │  │ • 查看      │        │ │
│  │  │ • 资料      │  │ • 取消      │  │ • 更新      │        │ │
│  │  │ • 密码      │  │ • 排班      │  │ • 下载      │        │ │
│  │  │             │  │ • 通知      │  │ • 上传      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   消息      │  │   通知      │  │   管理      │        │ │
│  │  │   控制器    │  │   控制器    │  │   控制器    │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 发送      │  │ • 创建      │  │ • 用户      │        │ │
│  │  │ • 接收      │  │ • 阅读      │  │   管理      │        │ │
│  │  │ • 历史      │  │ • 删除      │  │ • 统计      │        │ │
│  │  │ • 附件      │  │ • 国际化    │  │ • 设置      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   路由      │  │   中间件    │  │   工具      │        │ │
│  │  │   模块      │  │   模块      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 认证      │  │ • 认证      │  │ • 国际化    │        │ │
│  │  │ • 预约      │  │ • 角色      │  │ • 验证      │        │ │
│  │  │ • 病历      │  │ • 错误      │  │ • 数据库    │        │ │
│  │  │ • 消息      │  │ • 日志      │  │ • 备份      │        │ │
│  │  │ • 管理      │  │             │  │             │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                              │                                  │
│                              │ MongoDB                          │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    数据库 (MongoDB)                         │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   用户      │  │   预约      │  │   病历      │        │ │
│  │  │   集合      │  │   集合      │  │   集合      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 患者      │  │ • 待确认    │  │ • 患者      │        │ │
│  │  │ • 医生      │  │ • 已确认    │  │   记录      │        │ │
│  │  │ • 管理员    │  │ • 已取消    │  │ • 医生      │        │ │
│  │  │ • 资料      │  │ • 已完成    │  │   笔记      │        │ │
│  │  │ • 设置      │  │ • 排班      │  │ • 附件      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   消息      │  │   通知      │  │   医生      │        │ │
│  │  │   集合      │  │   集合      │  │   排班      │        │ │
│  │  │             │  │             │  │   集合      │        │ │
│  │  │ • 文本      │  │ • 系统      │  │ • 每日      │        │ │
│  │  │ • 图片      │  │ • 用户      │  │   时段      │        │ │
│  │  │ • 文件      │  │ • 已读      │  │ • 可用      │        │ │
│  │  │ • 系统      │  │ • 未读      │  │ • 已预约    │        │ │
│  │  │ • 历史      │  │ • 国际化    │  │ • 备注      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### Draw.io 绘制说明
1. **组件框**：使用矩形，圆角
2. **接口**：使用小圆圈，连接组件
3. **依赖关系**：使用虚线箭头
4. **关联关系**：使用实线箭头
5. **端口**：使用矩形，连接组件和接口

---

## 7. 部署图 (Deployment Diagram)

### 字符图表示
```
┌─────────────────────────────────────────────────────────────────┐
│                    生产环境                                    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    负载均衡器                              │ │
│  │                    (Nginx)                                 │ │
│  │                                                             │ │
│  │  • SSL 终止                                                │ │
│  │  • 静态文件服务                                            │ │
│  │  • 反向代理                                                │ │
│  │  • 限流                                                    │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                              │                                  │
│                              │ HTTP/HTTPS                       │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    网页服务器                              │ │
│  │                    (端口 3000)                             │ │
│  │                                                             │ │
│  │  ┌─────────────────────────────────────────────────────────┐ │ │
│  │  │                React 前端                               │ │ │
│  │  │                                                         │ │ │
│  │  │  • 静态文件                                             │ │ │
│  │  │  • JavaScript 包                                        │ │ │
│  │  │  • CSS 样式                                             │ │ │
│  │  │  • 图片和图标                                           │ │ │
│  │  │  • 服务工作者                                           │ │ │
│  │  └─────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                              │                                  │
│                              │ API 调用                         │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    API 服务器                              │ │
│  │                    (端口 5001)                             │ │
│  │                                                             │ │
│  │  ┌─────────────────────────────────────────────────────────┐ │ │
│  │  │                Node.js 后端                             │ │ │
│  │  │                                                         │ │ │
│  │  │  • Express 服务器                                       │ │ │
│  │  │  • JWT 认证                                             │ │ │
│  │  │  • 文件上传处理                                         │ │ │
│  │  │  • 邮件服务                                             │ │ │
│  │  │  • 日志服务                                             │ │ │
│  │  │  • 备份服务                                             │ │ │
│  │  └─────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                              │                                  │
│                              │ 数据库连接                       │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    数据库服务器                            │ │
│  │                    (端口 27017)                            │ │
│  │                                                             │ │
│  │  ┌─────────────────────────────────────────────────────────┐ │ │
│  │  │                MongoDB 数据库                           │ │ │
│  │  │                                                         │ │ │
│  │  │  • 用户集合                                             │ │ │
│  │  │  • 预约集合                                             │ │ │
│  │  │  • 病历集合                                             │ │ │
│  │  │  • 消息集合                                             │ │ │
│  │  │  • 通知集合                                             │ │ │
│  │  │  • 医生排班集合                                         │ │ │
│  │  │  • 文件存储                                             │ │ │
│  │  │  • 备份存储                                             │ │ │
│  │  └─────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    外部服务                                │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   邮件      │  │   文件      │  │   备份      │        │ │
│  │  │   服务      │  │   存储      │  │   服务      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • SMTP      │  │ • 本地      │  │ • 自动      │        │ │
│  │  │ • 模板      │  │ • 云端      │  │ • 定时      │        │ │
│  │  │ • 通知      │  │ • CDN       │  │ • 恢复      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### Draw.io 绘制说明
1. **节点**：使用立方体表示物理设备
2. **组件**：使用矩形，圆角
3. **连接线**：使用实线，标注协议和端口
4. **网络**：使用云形图标
5. **数据库**：使用圆柱形图标

---

## 图例说明 (Legend)

### 基本图形
- **矩形**：类、组件、活动
- **圆角矩形**：用例、组件
- **椭圆**：用例
- **菱形**：决策点
- **圆形**：开始/结束点
- **立方体**：节点/设备
- **圆柱**：数据库
- **云形**：网络/外部系统

### 连接线
- **实线箭头**：关联关系、同步消息
- **虚线箭头**：依赖关系、异步消息、返回消息
- **空心菱形箭头**：聚合关系
- **实心菱形箭头**：组合关系
- **空心三角形箭头**：继承关系

### 颜色方案
- **蓝色系**：前端相关 (#E3F2FD, #2196F3)
- **绿色系**：后端相关 (#E8F5E8, #4CAF50)
- **橙色系**：数据库相关 (#FFF3E0, #FF9800)
- **紫色系**：外部服务 (#F3E5F5, #9C27B0)
- **灰色系**：基础设施 (#F5F5F5, #757575)

### 字体规范
- **标题**：16pt, 粗体
- **类名/组件名**：14pt, 粗体
- **属性/方法**：12pt, 常规
- **注释**：10pt, 斜体

这些图表完整描述了医疗预约系统的架构、数据流和部署结构，可以直接在draw.io中绘制使用。
